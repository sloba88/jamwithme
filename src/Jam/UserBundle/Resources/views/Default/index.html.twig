{% extends "FOSUserBundle::layout.html.twig" %}

{% block fos_user_content %}
{% include "FOSUserBundle:Profile:show_content.html.twig" %}
{% endblock fos_user_content %}

{% block javascripts %}
    <link href="{{ asset('/css/jquery.Jcrop.min.css') }}" rel="stylesheet"/>
    <script src="/js/fileupload/vendor/jquery.ui.widget.js"></script>
    <!-- The Load Image plugin is included for the preview images and image resizing functionality -->
    <script src="/js/vendor/load-image.min.js"></script>
    <!-- The Canvas to Blob plugin is included for image resizing functionality -->
    <script src="/js/vendor/canvas-to-blob.min.js"></script>
    <!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
    <script src="/js/fileupload/jquery.iframe-transport.js"></script>
    <!-- The basic File Upload plugin -->
    <script src="/js/fileupload/jquery.fileupload.js"></script>
    <!-- The File Upload processing plugin -->
    <script src="/js/fileupload/jquery.fileupload-process.js"></script>
    <!-- The File Upload image preview & resize plugin -->
    <script src="/js/fileupload/jquery.fileupload-image.js"></script>
    <script src="/js/vendor/jquery.Jcrop.min.js"></script>
    <script src="/js/upload-photos.js"></script>

    <script>

        $(function() {

            _.templateSettings.variable = "mu";
            var musicianBoxTemplate     = _.template($( "#musicianBoxTemplate" ).html());

            $.ajax({
                url: Routing.generate('musicians_find'),
                data: "search_form[me]={{ user.id }}&search_form[distance]=50&"
            }).done(function( result ) {
                $.each(result.data, function(k, v){
                    $( ".similar-nearby-box" ).append(musicianBoxTemplate( v ) );
                });
            });

        });




    </script>

{% endblock %}