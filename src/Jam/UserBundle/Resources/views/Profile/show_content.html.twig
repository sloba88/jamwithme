{# TODO: TEACHER #}

<style>
    .instruments-profile-icons svg{
        width: 20px;
        height: 20px;
        float: left;
    }
</style>

<div class="{% if is_granted("ROLE_USER") %}col-md-10{% else %}col-sm-8{% endif %} teacher-container grey">
    <div class="row teacher-header">
        <section class="col-sm-5 teacher-info">
            <div class="teacher-info-inner">
                <div class="profile-picture-box">
                    <img src="{{ path('musician_avatar', { 'username': user.username, 'size' : 'my_medium_1' }) }}" alt="{% if user.firstName %} {{ user.firstName }} {% endif %}{% if user.lastName %} {{ user.lastName }} {% endif %}" class="profile-picture">
                </div>

                <div class="info">
                    <h1>{{ user.username }}</h1>
                    <p>{% if user.firstName %} {{ user.firstName }} {% endif %}{% if user.lastName %} {{ user.lastName }} {% endif %}</p>
                    {% if user.location %}
                        {% if user.location.getAdministrativeAreaLevel3 %}
                            <div class="location">
                                {% if user.location.neighborhood %}{{ user.location.neighborhood }},{% endif %} {{ user.location.getAdministrativeAreaLevel3 }}
                            </div>
                        {% endif %}
                    {% endif %}

                    <div class="bio">{{ user.genderText }}{% if user.age %}, {{ user.age }} years{% endif %}</div>

                    {% if is_granted("ROLE_USER") and app.user != user %}
                        <a href="#" class="btn btn-primary open-conversation" data-id="{{ user.id }}" data-user="{{ user.username }}"><i class="glyphicon glyphicon-envelope"></i>Message</a>
                    {% endif %}
                </div>
            </div>

            <div class="instruments-profile-icons">
                {% render(controller('JamWebBundle:Musicians:getUniqueIcons', {'username': user.username })) %}
            </div>

            {% if user.isTeacher %}
                <ul class="text-header clearfix">
                    <li class="first">
                        <img src="{{ asset('assets/images/icon-notebook.png') }}" alt="Notebook" class="icon-teacher">
                        teacher
                    </li>
                    {% if user.hourlyRate %}
                        <li class="rate">
                            - Hourly rate:<span>&euro;{{ user.hourlyRate }}</span>
                        </li>
                    {% endif %}
                </ul>
            {% endif %}
        </section>
        <!--teacher-info ends-->

        <section class="col-sm-3 teacher-instruments">
            <div class="teacher-instruments-inner">
                <div class="row">

                    {% if user.instruments|length == 0 %}
                        <div class="col-sm-10">No instruments yet.</div>
                    {% endif %}

                    {% for i in user.instruments %}
                        <div class="col-xs-6">
                            <a href="{{ path('musicians', {'instruments' : i.instrument.id }) }}">{{ i.instrument.name }}</a><br>
                            {% if loop.first %}<span class="main">main</span>{% endif %}
                        </div>

                        <div class="col-xs-6">
                            <ul>
                                {% for l in 1..i.skillLevel %}
                                    <li><span class="active"></span></li>
                                {% endfor %}
                                {% if 5-i.skillLevel !=0 %}
                                    {% for l in 1..(5-i.skillLevel) %}
                                        <li><span></span></li>
                                    {% endfor %}
                                {% endif %}
                            </ul>

                        </div>
                    {% endfor %}
                </div>
            </div>
        </section>
        <!--teacher-instruments ends-->

        <section class="col-sm-4 teacher-favorites dark">
            <div class="teacher-favorites-inner">

                <!-- genres -->
                {% if user.genres|length == 0 %}
                <div class="tags-container">No genres yet.</div>
                {% else %}
                    <div class="tags-container">
                        <ul class="tags">
                            {% for g in user.genres %}
                                <li><a href="{{ path('musicians', {'genres' : g.genre.id }) }}">{{ g.genre.name }}</a></li>
                            {% endfor %}
                        </ul>
                        {% if user.genres|length > 3 %}
                            <a href="#" class="show-all-tags"><i class="fa fa-angle-down"></i></a>
                        {% endif %}
                    </div>
                {% endif %}

                <!-- influencers -->
                <div class="favorite-group first">
                    <span>Influencers:</span>
                    {% if user.artists|length == 0 %}None.{% endif %}
                    <div class="favorite-group-inner with-scrollbar">
                        {% for a in user.artists %}
                            {{ a.name }}{% if not loop.last %}, {% endif %}
                        {% endfor %}
                    </div>
                </div>
                
                <!-- brands -->
                <div class="favorite-group">
                    <span>Favourite brands:</span>
                    {% if user.brands|length == 0 %}None.{% endif %}
                    <div class="favorite-group-inner with-scrollbar">
                        {% for b in user.brands %}
                            {{ b.brand.name }}{% if not loop.last %}, {% endif %}
                        {% endfor %}
                    </div>
                </div>
            </div>
        </section>
    </div>

    {% if is_granted("ROLE_USER") %}

        <div class="row">
            <section class="col-sm-8 main-content">
                    
                    <ul class="tabs-activate profile-tabs">
                        <li><a href="#" data-tab="about" class="is-active">About</a></li>
                        <li><a href="#" data-tab="photos" class="my-photos">Photos</a></li>
                        <li><a href="#" data-tab="videos" class="my-videos">Videos</a></li>
                        <li><a href="#" data-tab="sounds" class="my-sounds">Sounds</a></li>
                        <li class="last">
                            {% if app.user != user %}
                                <ul class="compatibility-box">
                                    <li>
                                        <img src="{{ asset('assets/images/icon-compatibility.png') }}" alt="Compatibility">
                                    </li>
                                    <li class="compatibility">
                                        <span></span>
                                        compatibility
                                    </li>
                                </ul>
                            {% endif %}
                        </li>
                    </ul>

                <div class="main-content-inner">

                    <div class="view-tab-container teacher-text-container with-scrollbar">

                        <div class="view-tab about is-active" data-tab="about">
                            {% if user.isTeacher %}<h6>Overview</h6>{% endif %}
                            <p>{{ user.aboutMe|default("Nothing yet here.") }}</p>

                            {% if user.isTeacher %}
                                <h6>Education</h6>
                                <p>{{ user.education|default("Nothing yet here.") }}</p>
                            {% endif %}
                        </div>

                        <div class="view-tab my-photos" data-tab="photos">

                            <div class="profile-media-wall">

                                {% if user.images|length == 0 %}
                                    <p>No photos yet.</p>
                                {% endif %}

                                {% for i in user.images %}
                                    <div class="image-holder profile-media-wall-item">
                                        <a class="fancybox" rel="group" href="{{ asset(i.getWebPath) }}"><img src="{{ asset(i.getWebPath) | imagine_filter('my_medium_'~i.type) }}" /></a>
                                    </div>
                                {% endfor %}
                            </div>

                        </div>
                        <!--photos ends-->

                        <div class="view-tab my-videos" data-tab="videos">

                            {% if user.videos|length == 0 %}
                                <p>No videos yet.</p>
                            {% endif %}

                            {% for v in user.videos %}
                                <a class="ytvideo" rel="group" href="{{ v.url }}&autoplay=1&showinfo=0&controls=0"><img src="" height="140" width="260" /></a>
                            {% endfor %}
                        </div>
                        <!--videos ends-->

                        <div class="view-tab my-sounds" data-tab="sounds">
                            {% if (user.getSoundcloudId == "") %}
                                <p>No sounds yet.</p>
                            {% endif %}
                        </div>

                    </div>
                    <!--view-tab-container ends-->
                </div>
            </section>
            <!--main-content ends-->

            <section class="col-sm-4 hidden-xs shouts-sidebar">
                <div class="sidebar-inner">

                    <div class="shouts-feed">
                        <h3>Shouts feed</h3>
                    </div>
                    <!--shouts-feed ends-->

                    <div class="shouts-listing-container">
                        <div class="shouts-listing shouts-listing-feed">

                            {% if user.shouts|length == 0 %}
                                <h5>No shouts yet.</h5>
                            {% endif %}

                            {% for s in user.shouts %}

                                <article class="shout-box clearfix">
                                    <a href="{{ app.request.getBaseURL() }}/m/{{ user.username }}" class="musician-box-image-link img-circle">
                                        <img src="{{ app.request.getBaseURL() }}/m/{{ user.username }}/avatar" class="" width="50" />
                                    </a>

                                    <div class="shout-text">
                                        <h4 class="name">{{ user.username }}</h4>

                                        <div class="time">
                                            <span>{{ s.createdAt.date }} min</span>ago
                                        </div>
                                        <p>{{ s.text }}</p>
                                    </div>
                                </article>

                            {% endfor %}

                        </div>
                        <!--shouts-listing ends-->
                    </div>
                    <!--shouts-listing-container ends-->

                </div>
            </section>
        </div>
    {% endif %}
</div>